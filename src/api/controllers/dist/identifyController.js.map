{"version":3,"sources":["identifyController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,0CAAmC;AACnC,sDAAiD;AAEjD,IAAM,IAAI,GAAG,oBAAK,CAAC,UAAU,CAAC;IAC5B,IAAI,EAAE,WAAW;IACjB,IAAI,EAAE,SAAS;IACf,QAAQ,EAAE,WAAW;IACrB,QAAQ,EAAE,oBAAoB;IAC9B,eAAe,EAAE,EAAE;CACpB,CAAC,CAAC;AAEH,IAAM,kBAAkB,GAAG;IACnB,QAAQ,EAAd,UAAe,GAAY,EAAE,GAAa,EAAE,IAAkB;;;;gBAC5D,IAAI;oBACI,KAAyB,GAAG,CAAC,IAAI,EAA/B,KAAK,WAAA,EAAE,WAAW,iBAAA,CAAc;oBAEpC,gBAAgB,SAAA,CAAC;oBACjB,MAAM,GAAa,EAAE,CAAC;oBACtB,YAAY,GAAa,EAAE,CAAC;oBAC5B,mBAAmB,GAAa,EAAE,CAAC;oBAGvC,yBAAY,CAAC,oBAAoB,CAAC,GAAG,EAAE,gBAAgB,EAAE,MAAM,EAAE,YAAY,EAAE,mBAAmB,CAAC,CAAC;iBACrG;gBAAC,OAAO,KAAK,EAAE;oBACd,OAAO,CAAC,KAAK,CAAC,iBAAiB,EAAE,KAAK,CAAC,CAAC;oBACxC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,wBAAwB,EAAE,CAAC,CAAC;oBAC1D,IAAI,CAAC,KAAK,CAAC,CAAC;iBACb;;;;KACF;CACF,CAAC;AAEF,qBAAe,kBAAkB,CAAC","file":"identifyController.js","sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\nimport mysql from 'mysql2/promise';\r\nimport identifyView from '../views/identifyView';\r\n\r\nconst pool = mysql.createPool({\r\n  host: '127.0.0.1',\r\n  user: 'Watto-s',\r\n  password: 'adminroot',\r\n  database: 'endpoint_bitespeed',\r\n  connectionLimit: 10,\r\n});\r\n\r\nconst identifyController = {\r\n  async identify(req: Request, res: Response, next: NextFunction) {\r\n    try {\r\n      const { email, phoneNumber } = req.body;\r\n\r\n      let primaryContactId;\r\n      let emails: string[] = [];\r\n      let phoneNumbers: string[] = [];\r\n      let secondaryContactIds: number[] = [];\r\n\r\n\r\n      identifyView.sendIdentifyResponse(res, primaryContactId, emails, phoneNumbers, secondaryContactIds);\r\n    } catch (error) {\r\n      console.error('Error occurred:', error);\r\n      res.status(500).json({ error: 'Internal server error.' });\r\n      next(error);\r\n    }\r\n  },\r\n};\r\n\r\nexport default identifyController;\r\n"]}