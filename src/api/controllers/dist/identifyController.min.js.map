{"version":3,"sources":["identifyController.ts"],"names":["promise_1","require","identifyView_1","pool","createPool","host","user","password","database","connectionLimit","identifyController","identify","req","res","next","_a","body","email","phoneNumber","emails","phoneNumbers","secondaryContactIds","sendIdentifyResponse","error","console","status","json","exports"],"mappings":"y7CACA,IAAAA,UAAAC,QAAA,kBACAC,eAAAD,QAAA,yBAEME,KAAOH,UAAA,QAAMI,WAAW,CAC5BC,KAAM,YACNC,KAAM,UACNC,SAAU,YACVC,SAAU,qBACVC,gBAAiB,KAGbC,mBAAqB,CACnBC,SAAN,SAAeC,EAAcC,EAAeC,kGAC1C,IACQC,EAAyBH,EAAII,KAAtBD,EAAAE,MAAaF,EAAAG,iBAEN,EAChBC,EAAmB,GACnBC,EAAyB,GACzBC,EAAgC,GAGpCnB,eAAA,QAAaoB,qBAAqBT,OANd,EAMqCM,EAAQC,EAAcC,GAC/E,MAAOE,GACPC,QAAQD,MAAM,kBAAmBA,GACjCV,EAAIY,OAAO,KAAKC,KAAK,CAAEH,MAAO,2BAC9BT,EAAKS,mBAKXI,QAAA,QAAejB","file":"identifyController.min.js","sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\nimport mysql from 'mysql2/promise';\r\nimport identifyView from '../views/identifyView';\r\n\r\nconst pool = mysql.createPool({\r\n  host: '127.0.0.1',\r\n  user: 'Watto-s',\r\n  password: 'adminroot',\r\n  database: 'endpoint_bitespeed',\r\n  connectionLimit: 10,\r\n});\r\n\r\nconst identifyController = {\r\n  async identify(req: Request, res: Response, next: NextFunction) {\r\n    try {\r\n      const { email, phoneNumber } = req.body;\r\n\r\n      let primaryContactId;\r\n      let emails: string[] = [];\r\n      let phoneNumbers: string[] = [];\r\n      let secondaryContactIds: number[] = [];\r\n\r\n\r\n      identifyView.sendIdentifyResponse(res, primaryContactId, emails, phoneNumbers, secondaryContactIds);\r\n    } catch (error) {\r\n      console.error('Error occurred:', error);\r\n      res.status(500).json({ error: 'Internal server error.' });\r\n      next(error);\r\n    }\r\n  },\r\n};\r\n\r\nexport default identifyController;\r\n"]}